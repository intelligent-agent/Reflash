<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Reflash</title>
    <link rel="stylesheet" type="text/css" href="static/css/reflash.css">
    <link rel="stylesheet" type="text/css" href="static/css/bootstrap.min.css">
    <script type='text/javascript' src='/static/js/bootstrap.bundle.min.js'></script>
    <script type='text/javascript' src='/static/js/jquery-3.6.0.min.js'></script>
    <script type='text/javascript' src='/static/js/knockout-3.5.1.js'></script>
    <script type='text/javascript' src='/static/js/reflash.js'></script>
  </head>
  <body>
      <div class="container d-flex flex-column min-vh-100 justify-content-center align-items-center">
        <div class="card">
          <div class="card-header">
            Reflash
            <img src="/static/img/reboot-light.png" style="float: right;" data-bind="click: rebootBoard" data-toggle="tooltip" data-placement="top" title="Reboot the board"/>
          </div>
          <div class="card-body p-5">
          <p>
            This page is running from a USB drive on Recore. You can use this page to download and
            install distros to the eMMC of Recore.
          </p>
          <div class="row text-center align-items-center justify-content-center align-self-center">
            <div class="col"><b>GitHub</b></div>
            <div class="col"><b>Download</b></div>
            <div class="col"><b>USB drive</b></div>
            <div class="col"><b>Flash</b></div>
            <div class="col"><b>eMMC</b></div>
            <div class="w-100"></div>
            <div class="col"><img src="/static/img/GitHub-light.png" /></div>
            <div class="col"><img src="/static/img/arrow-left-light.png" /></div>
            <div class="col"><img src="/static/img/USB-light.png" /></div>
            <div class="col"><img src="/static/img/arrow-left-light.png" /></div>
            <div class="col"><img src="static/img/eMMC-light.png" /></div>
            <div class="w-100"></div>
            <div class="col"><b>Choose image to download</b></div>
            <div class="col">
              <div data-bind="ifnot: isDownloading()">
                <button class="btn btn-primary" data-bind="click: downloadSelectedVersion">Download</button>
              </div>
              <div data-bind="if: isDownloading()">
                <button class="btn btn-primary" data-bind="click: cancelDownload">Cancel</button>
              </div>
            </div>
            <div class="col"><b>Choose image to install</b></div>
            <div class="col"><button class="btn btn-primary" data-bind="click: installSelectedVersion">Install</button></div>
            <div class="col"></div>
            <div class="w-100"></div>
            <div class="col">
              <select data-bind="options: remoteRefactorVersions, optionsText: function(item) {
                                     return item.name
                                 },
                                  value: remoteSelectedVersion">
              </select>
            </div>
            <div class="col">
              <div data-bind="if: isDownloading()">
                <div class="progress">
                  <div data-bind="style: { width: downloadProgress }" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
            </div>
            <div class="col">
              <div data-bind="ifnot: isInstalling()">
                <select data-bind="options: localRefactorVersions, value: localSelectedVersion,"></select>
              </div>
            </div>
            <div class="col">
            <div data-bind="if: isInstalling()">
              <div class="progress">
                <div data-bind="style: { width: installProgress }" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
            </div>
            <div class="col"></div>
            <div data-bind="if: isInstallFinished()" class="pt-5">
              Install finished! Now reboot the board by pressing this button<br>
              <button class="btn btn-primary" data-bind="click: rebootBoard">Reboot</button>
            </div>
          </div>
        </div>
    </div>
  </body>
</html>
